I"R<p>Virtual Network Computing (VNC) is a powerful application that allows you to use graphical windows of a browser without being physically with the computer. By default, the work station is hidden behind a firewall. So in order to use vnc, you have to create a vncserver and forward that port to your computer.</p>

<p>TODO: <a href="https://askubuntu.com/questions/581979/ubuntu-14-10-multiple-simultaneous-independent-remote-desktop-like-connection">look into automatic startup and shutdown of servers</a>.</p>

<p>TODO: Improve vncserver launching so you don’t have to check numbers</p>

<h2 id="setup-guide">Setup Guide</h2>

<p>Initial setup for vnc is pretty simple, as the package is already installed. Please SSH to the work station. Refer to <a href="/posts/ssh">this post</a> for an explanation on how to do that.</p>

<h3 id="vnc-password">VNC Password</h3>

<p>First, you must create a vnc password. To do this, run the following command and enter a password:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td> --><td class="rouge-code"><pre><span class="gp">user@name:~$</span><span class="w"> </span>vncpasswd
<span class="go">Password:
Verify:
Would you like to enter a view-only password (y/n)? n
</span></pre></td></tr></tbody></table></code></pre></div></div>
<blockquote>
  <p>Note: Nothing will print out for the Password or Verify entries. This is for security reasons, so continue to type as you normally would.</p>
</blockquote>

<h3 id="starting-a-vnc-server">Starting a VNC Server</h3>

<p>A vnc server is the entity that helps you run a graphical window and visualize it on your own computer. This is already installed on the workstation.</p>

<p>To launch a server, run the following command:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td> --><td class="rouge-code"><pre><span class="gp">user@name:~$</span><span class="w"> </span>vncserver
<span class="go">
New 'carproject-06:1 (username)' desktop at :1 on machine carproject-06

Starting applications specified in /etc/X11/Xvnc-session
Log file is /filespace/a/username/.vnc/carproject-06:1.log

Use xtigervncviewer -SecurityTypes VncAuth -passwd /filespace/a/username/.vnc/passwd :1 to connect to the VNC server.
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>As you can see, the <code class="language-plaintext highlighter-rouge">vncserver</code> command will launch a vnc server and start rendering the desktop window. Take note of the number in the first line of the output, i.e. “New ‘carproject-06:1 (username)’ desktop at <strong>:1</strong> on machine carproject-06”. This is your server number and will be used for connecting in the next step.</p>

<h3 id="create-a-ssh-tunnel">Create a SSH Tunnel</h3>

<p>This process is explained in more detail in <a href="/posts/ssh">this post</a>.</p>

<p>We want to create an <code class="language-plaintext highlighter-rouge">ssh</code> tunnel for the port numbered <code class="language-plaintext highlighter-rouge">5900</code> <strong>plus</strong> the server number. For example, if your server number from the previous section was <strong>:1</strong> (see above), then your port number will be <code class="language-plaintext highlighter-rouge">5901</code>. If your server number is <code class="language-plaintext highlighter-rouge">11</code>, then your port number will be <code class="language-plaintext highlighter-rouge">5911</code>.</p>

<p>To create the <code class="language-plaintext highlighter-rouge">ssh</code> tunnel, run the following command (change <code class="language-plaintext highlighter-rouge">5901</code> and <code class="language-plaintext highlighter-rouge">&lt;cae username&gt;</code> to the correct values):</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
</pre></td> --><td class="rouge-code"><pre>ssh <span class="nt">-L</span> 5901:localhost:5901 <span class="nt">-J</span> &lt;cae username&gt;@best-tux.cae.wisc.edu &lt;cae username&gt;@carproject-06.engr.wisc.edu
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="connect-to-vnc">Connect to VNC</h3>

<p>Now that our server is running, we can actually connect to the work station. To do this, you will need a VNC viewer. <a href="https://www.realvnc.com/en/connect/download/viewer/">RealVNC</a> is a good selection and is available on most systems.</p>

<p>Once installed, create a new connection. Please refer to the documentation for your specific viewer. Here is a detailed guide for the <a href="https://devanswers.co/install-vnc-ubuntu-18-04-windows-mac-linux/#VNC-Viewer-on-Windows-and-MacOS">RealVNC Viewer</a>.</p>

<p>The url for your VNC server should be <code class="language-plaintext highlighter-rouge">localhost:&lt;port number&gt;</code> where <code class="language-plaintext highlighter-rouge">&lt;port number&gt;</code> is the same value that you used in the previous section (i.e. <code class="language-plaintext highlighter-rouge">localhost:5901</code>).</p>

<p>When prompted for a password, use the password you created in the <a href="#vnc-password">VNC Password</a> section.</p>

<h4 id="mac-users">Mac Users</h4>

<p>Mac users can simply use Finder to run a VNC session. To do this, open finder, hit ⌘K. A window should pop up and you should type the vnc url from the previous section with the prefix <code class="language-plaintext highlighter-rouge">vnc://</code>. Hit connect and you should be good to go! Should be something similar to the image below.</p>

<p><img src="/assets/img/workstation/vnc_mac.png" alt="VNC Mac" /></p>

<h3 id="using-vnc">Using VNC</h3>

<p>Once the viewer opens, you may be prompted to login. Use the same password as your cae account. From there, you can use the work station like any other computer! You should see something similar to this.</p>

<p><img src="/assets/img/workstation/vnc_background.png" alt="VNC Background" /></p>

<h3 id="killing-a-vnc-server">Killing a VNC Server</h3>

<p>When done, ensure that you kill/shutdown the vnc server. To that, run the following command:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
</pre></td> --><td class="rouge-code"><pre>vncserver <span class="nt">-kill</span> :1
</pre></td></tr></tbody></table></code></pre></div></div>
<blockquote>
  <p>Note: Replace <code class="language-plaintext highlighter-rouge">:1</code> with whatever server number you used before</p>
</blockquote>

<h2 id="support">Support</h2>

<p>Contact <a href="mailto:aryoung5@wisc.edu">Aaron Young</a> for any questions or concerns regarding the contents of this repository.</p>

<h2 id="see-also">See Also</h2>

<p>Stay up to date with our technical info by following our <a href="https://www.wisconsinautonomous.org/blog">blog</a>.</p>

<p>Follow us on <a href="https://www.facebook.com/wisconsinautonomous/">Facebook</a>, <a href="https://www.instagram.com/wisconsinautonomous/">Instagram</a>, and <a href="https://www.linkedin.com/company/wisconsin-autonomous/about/">LinkedIn</a>!</p>

<p><img src="/assets/img/logos/wa-white.png" alt="WA Logo" class="left" height="100" />
<img src="/assets/img/logos/uw-crest.png" alt="Wisconsin Crest" class="right" height="100" /></p>
:ET