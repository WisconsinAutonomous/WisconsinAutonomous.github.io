<!DOCTYPE html>



<html lang="en" 
  
    mode="dark"
  
>

  <!--
  The Head
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="theme" content="Chirpy v2.7.2">

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Environment Modules" />
<meta name="author" content="Aaron Young" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Environment Modules allows users to configure a shell environment efficiently and reduce conflicting installations of packages. The main ingredients the define Modules are described in files called modulefiles. modulefiles provide instructions for how to load and unload specific modules, such as setting the PATH, PYTHONPATH or other environment variables. This means that multiple versions of the same software can exist on a system without actually conflicting with each other; i.e. someone could load gcc 9.3 while someone else would rather use gcc 8.4, of which do not actually interact with one another if their individual modulefiles are loaded separately." />
<meta property="og:description" content="Environment Modules allows users to configure a shell environment efficiently and reduce conflicting installations of packages. The main ingredients the define Modules are described in files called modulefiles. modulefiles provide instructions for how to load and unload specific modules, such as setting the PATH, PYTHONPATH or other environment variables. This means that multiple versions of the same software can exist on a system without actually conflicting with each other; i.e. someone could load gcc 9.3 while someone else would rather use gcc 8.4, of which do not actually interact with one another if their individual modulefiles are loaded separately." />
<link rel="canonical" href="https://wisconsinautonomous.github.io/posts/modules/" />
<meta property="og:url" content="https://wisconsinautonomous.github.io/posts/modules/" />
<meta property="og:site_name" content="Wisconsin Autonomous Wiki" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-01-17T11:27:00-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Environment Modules" />
<meta name="twitter:site" content="@wisconsinsae" />
<meta name="twitter:creator" content="@Aaron Young" />
<meta name="google-site-verification" content="google-site-verification=YfDmeOPIcTbrGeSI41_jHhUfinOLP4na9_TSFbc-Jeo" />
<script type="application/ld+json">
{"url":"https://wisconsinautonomous.github.io/posts/modules/","mainEntityOfPage":{"@type":"WebPage","@id":"https://wisconsinautonomous.github.io/posts/modules/"},"author":{"@type":"Person","name":"Aaron Young"},"description":"Environment Modules allows users to configure a shell environment efficiently and reduce conflicting installations of packages. The main ingredients the define Modules are described in files called modulefiles. modulefiles provide instructions for how to load and unload specific modules, such as setting the PATH, PYTHONPATH or other environment variables. This means that multiple versions of the same software can exist on a system without actually conflicting with each other; i.e. someone could load gcc 9.3 while someone else would rather use gcc 8.4, of which do not actually interact with one another if their individual modulefiles are loaded separately.","@type":"BlogPosting","headline":"Environment Modules","dateModified":"2021-01-29T14:59:41-06:00","datePublished":"2021-01-17T11:27:00-06:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  <title>Environment Modules | Wisconsin Autonomous Wiki
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://www.favicon-generator.org/
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2019 Cotes Chung
  Published under the MIT license
-->



<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon">
<link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon">

<link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png">
<link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png">
<link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png">

<link rel="icon" type="image/png" sizes="192x192"  href="/assets/img/favicons/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

<link rel="manifest" href="/assets/img/favicons/manifest.json">
<meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'>
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">


  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">

  <!-- GA -->
  

  <!-- jsDelivr CDN -->
  <link rel="preconnect" href="cdn.jsdelivr.net">
  <link rel="dns-prefetch" href="cdn.jsdelivr.net">

  <!-- Bootstrap -->
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous">

  <!-- Font Awesome -->
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"
    integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ="
    crossorigin="anonymous">

  <!--
  CSS selector for site.
  Chirpy v2.3
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT Licensed
-->






<link rel="preload" href="/assets/css/post.css" as="style">
<link rel="stylesheet" href="/assets/css/post.css">


  
    <link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css">
    <link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" />
  



  <!-- JavaScripts -->

  <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>

  <script defer
    src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script>

  <!--
  JS selector for site.
  Chirpy v2.3
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT Licensed
-->





<script async src="/assets/js/post.min.js"></script>






</head>


  <body data-spy="scroll" data-target="#toc">

    <!--
  The Side Bar
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<div id="sidebar" class="d-flex flex-column align-items-end">

  <div class="profile-wrapper text-center">
    <div id="avatar">
      <a href="/" alt="avatar" class="mx-auto">
        

        

        <img src="https://github.com/WisconsinAutonomous/wa-resources/blob/master/Images/wa-square-dark.png?raw=true" alt="avatar" onerror="this.style.display='none'">
      </a>
    </div>

    <div class="site-title mt-3">
      <a href="/">Wisconsin Autonomous Wiki</a>
    </div>

    <div class="site-subtitle font-italic">A student organizaton at UW Madison</div>

  </div><!-- .profile-wrapper -->

  <ul class="w-100">
    <!-- home -->
    <li class="nav-item">
      <a href="/" class="nav-link">
        <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i>
        <span>HOME</span>
      </a>
    </li>
    <!-- the real tabs -->
    
    <li class="nav-item">
      <a href="/tabs/documentation/" class="nav-link">
        <i class="fa-fw fas fa-book ml-xl-3 mr-xl-3 unloaded"></i>
        <span>DOCUMENTATION</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tabs/categories/" class="nav-link">
        <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i>
        <span>CATEGORIES</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tabs/tags/" class="nav-link">
        <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i>
        <span>TAGS</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tabs/archives/" class="nav-link">
        <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i>
        <span>ARCHIVES</span>
      </a>
    </li> <!-- .nav-item -->
    
    <li class="nav-item">
      <a href="/tabs/about/" class="nav-link">
        <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i>
        <span>ABOUT</span>
      </a>
    </li> <!-- .nav-item -->
    

  </ul> <!-- ul.nav.flex-column -->

  <div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center">

    
      

      
      <a href="https://github.com/WisconsinAutonomous" aria-label="github"
        
        target="_blank" rel="noopener">
        <i class="fab fa-github-alt"></i>
      </a>
      

    
      

      
      <a href="https://instagram.com/wisconsinautonomous" aria-label="instagram"
        
        target="_blank" rel="noopener">
        <i class="fab fa-instagram"></i>
      </a>
      

    
      

      
      <a href="https://facebook.com/wiconsinautonomous" aria-label="facebook"
        
        target="_blank" rel="noopener">
        <i class="fab fa-facebook"></i>
      </a>
      

    
      

      
      <a href="https://linkedin.com/company/wisconsinsae" aria-label="linkedin"
        
        target="_blank" rel="noopener">
        <i class="fab fa-linkedin"></i>
      </a>
      

    
      

      
      <a href="
          javascript:location.href = 'mailto:' + ['wisconsinautonomous','studentorgs.wisc.edu'].join('@')" aria-label="email"
        
        >
        <i class="fas fa-envelope"></i>
      </a>
      

    

    

  </div> <!-- .sidebar-bottom -->

</div><!-- #sidebar -->


    <!--
  The Top Bar
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->
<div id="topbar-wrapper" class="row justify-content-center topbar-down">
  <div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between">
    <span id="breadcrumb">
      
        
        <span>
          <a href="/">
            Posts
          </a>
        </span>
        
      

      
        <span>Environment Modules</span>
      

    </span><!-- endof #breadcrumb -->

    <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i>

    <div id="topbar-title">
      Post
    </div>

    <i id="search-trigger" class="fas fa-search fa-fw"></i>
    <span id="search-wrapper" class="align-items-center">
      <i class="fas fa-search fa-fw"></i>
      <input class="form-control" id="search-input" type="search"
        aria-label="search" placeholder="Search...">
      <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i>
    </span>
    <span id="search-cancel" >Cancel</span>
  </div>

</div>


    <div id="main-wrapper">
      <div id="main">

        <!--
  Refactor the HTML structure.
-->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->


<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->


<!-- Add attribute 'hide-bullet' to the checkbox list -->




  

  

  <!-- lazy-load images <https://github.com/ApoorvSaxena/lozad.js#usage> -->
  
  

  

  



<!-- return -->
<div class="row">

  <div id="post-wrapper" class="col-12 col-lg-11 col-xl-8">

    <div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">

      <h1 data-toc-skip>Environment Modules</h1>

      <div class="post-meta text-muted d-flex flex-column">
        <!-- Published date and author -->
        <div>
          <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago "
  
    data-toggle="tooltip"
    data-placement="bottom"
    title="Sun, Jan 17, 2021, 11:27 AM -0600"
  >

  
  

  
    Jan 17
  

  <i class="unloaded">2021-01-17T11:27:00-06:00</i>

</span>
          by
          <span class="author">
            Aaron Young
          </span>
        </div>

        <div>
          <!-- lastmod -->
          
          <span>
            Updated
            <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago lastmod"
  
    data-toggle="tooltip"
    data-placement="bottom"
    title="Fri, Jan 29, 2021,  2:59 PM -0600"
  >

  
  

  
    Jan 29
  

  <i class="unloaded">2021-01-29T14:59:41-06:00</i>

</span>
          </span>
          

          <!-- read time -->
          <!--
  Calculate the post's reading time, and display the word count in tooltip
 -->






<!-- return element -->
<span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1672 words">9 min</span>


          <!-- page views -->
          

        </div>

      </div> <!-- .post-meta -->

      <div class="post-content">

        

        <p><a href="http://modules.sourceforge.net/">Environment Modules</a> allows users to configure a shell environment efficiently and reduce conflicting installations of packages. The main ingredients the define Modules are described in files called <code class="language-plaintext highlighter-rouge">modulefiles</code>. <code class="language-plaintext highlighter-rouge">modulefiles</code> provide instructions for how to <em>load</em> and <em>unload</em> specific modules, such as setting the <code class="language-plaintext highlighter-rouge">PATH</code>, <code class="language-plaintext highlighter-rouge">PYTHONPATH</code> or other environment variables. This means that multiple versions of the same software can exist on a system without actually conflicting with each other; i.e. someone could <em>load</em> <code class="language-plaintext highlighter-rouge">gcc 9.3</code> while someone else would rather use <code class="language-plaintext highlighter-rouge">gcc 8.4</code>, of which do not actually interact with one another if their individual <code class="language-plaintext highlighter-rouge">modulefiles</code> are loaded separately.</p>

<p>Our work station uses Environment Modules, as it helps leaders create software packages loadable by certain members or students without breaking another persons installation. In this post, I will describe how to create a <code class="language-plaintext highlighter-rouge">modulefile</code>, where modules should be placed and how to <em>load</em> or <em>unload</em> modules.</p>

<h2 id="using-modules">Using Modules</h2>

<p>Modules are very easy to use, both from a leader’s perspective and a student’s.</p>

<p>For most, you’ll never need to create a <code class="language-plaintext highlighter-rouge">modulefile</code>. For those people, using modules is as simple as running one or two commands to search for available modules and then load them.</p>

<p>For additional research, please reference their official <a href="http://modules.sourceforge.net/">website</a> and <a href="https://modules.readthedocs.io/en/latest/">documentation</a>.</p>

<h3 id="loading-a-modulefile">Loading a Modulefile</h3>

<p>Loading a specific module is as easy as running the following command:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span>module load &lt;module name&gt;
</pre></td></tr></tbody></table></code></div></div>

<p>This will grab the <code class="language-plaintext highlighter-rouge">modulefile</code> that describes that module and complete the instructions it describes. You may also load multiple files at once. For instance, the following command will load gcc 9.3 and cuda 11.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span>module load gcc/9.3 cuda/11
</pre></td></tr></tbody></table></code></div></div>

<h3 id="searching-for-a-modulefile">Searching for a Modulefile</h3>

<p>To run the <code class="language-plaintext highlighter-rouge">load</code> command, you’ll need to know the name of a module. The names of modules can be found in a variety of ways, but the two most common are the <code class="language-plaintext highlighter-rouge">avail</code> commands and through shell completion.</p>

<p>The <code class="language-plaintext highlighter-rouge">avail</code> command is a way to list out every <code class="language-plaintext highlighter-rouge">modulefile</code> created on the system. An example output can be seen below.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span>module avail
anaconda/2/2019.03              boost/1.62.0        cuda/11             gcc/8.1.x
anaconda/3/                     boost/1.66.0        cuda/11.0           gcc/8.2.0
anaconda/3/2019.03              boost/1.67.0        cuda/11.1           gcc/8.2.0-el7
anaconda/3/2019.07              boost/1.67.0-py3    cuda/11.2           gcc/8.2.x
</pre></td></tr></tbody></table></code></div></div>

<p>The <code class="language-plaintext highlighter-rouge">avail</code> command can be overwhelming, especially with a lot of modulefiles on the system. Another helpful tool is shell completion, which basically allows you to begin to type a modules name, hit tab and possible options will then display. This is done within the <code class="language-plaintext highlighter-rouge">load</code> command. An example is shown below (the <code class="language-plaintext highlighter-rouge">&lt;tab&gt;</code> sequence indicates the tab key was pressed).</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="nv">$ </span>module load &lt;tab&gt;
anaconda              			boost        		cuda             	gcc

<span class="nv">$ </span>module load anaconda/&lt;tab&gt;
anaconda/2/              		anaconda/3/

<span class="nv">$ </span>module load anaconda/3/&lt;tab&gt;
anaconda/3/2019.03		 		anaconda/3/2019.07
</pre></td></tr></tbody></table></code></div></div>

<h3 id="automatic-loading-through-shell-profiles">Automatic Loading through Shell Profiles</h3>

<p>A very common tool for automatic shell configuration is shell profile files. With shell profile files, we can tell the terminal to configure out environment <em>every</em> time you open it up. This means you can add <code class="language-plaintext highlighter-rouge">module load &lt;common module&gt;</code> in your shell profile file and not have to actually run it yourself. I have already gone in depth about shells in another <a href="/posts/shells">post</a>, so please read through that post if you have not already.</p>

<p>If you haven’t noticed already, there should be already be a line in your shell profile file (we’ll assume it’s a <code class="language-plaintext highlighter-rouge">bashrc</code> file from now on) that appears to reference modules. This command initializes your shell environment so you can run <code class="language-plaintext highlighter-rouge">module ...</code> commands. That line may look like the following:</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nb">source</span> /usr/local/Modules/init/bash
</pre></td></tr></tbody></table></code></div></div>

<p><strong><em>Do not edit that line!!!</em></strong></p>

<p><strong>Following</strong> this line, you may place custom <code class="language-plaintext highlighter-rouge">module</code> specific commands to be run everytime you open a terminal. For example, some people may know they would like to use anaconda, cuda and gcc almost everytime they use the workstation. Running <code class="language-plaintext highlighter-rouge">module load anaconda/3/2019.03 gcc/9.3 cuda/11</code> everytime you open a terminal window would kind of suck. So it is advisable to add that line to your <code class="language-plaintext highlighter-rouge">bashrc</code> (or your shells equivalent).</p>

<p>Your <code class="language-plaintext highlighter-rouge">bashrc</code> may look something like this…</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nb">source</span> /usr/local/Modules/init/bash

module load anaconda/3/2019.03 gcc/9.3 cuda/11
</pre></td></tr></tbody></table></code></div></div>

<blockquote>
  <p>Note: Although it may save time for some, do not add <code class="language-plaintext highlighter-rouge">module load &lt;module&gt;</code> to your <code class="language-plaintext highlighter-rouge">bashrc</code> unless necessary, as it may slow down initialization time if your terminal window.</p>
</blockquote>

<h2 id="work-station-configuration">Work Station Configuration</h2>

<p>For people who would like to add global packages, this section aims to explain how <code class="language-plaintext highlighter-rouge">modules</code> are organized on the work station and how <code class="language-plaintext highlighter-rouge">modulefiles</code> can be created in a sustainable manner.</p>

<h3 id="system-organization">System Organization</h3>

<blockquote>
  <p>Warning! This is for advanced users. Please consult team leaders before taking this challenge on.</p>
</blockquote>

<blockquote>
  <p>System configuration of modulefiles requires sudo privileges</p>
</blockquote>

<p>There are two places where <code class="language-plaintext highlighter-rouge">module</code> related information is shared:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">/usr/local/Modules/modulefiles</code>: The location of the <code class="language-plaintext highlighter-rouge">modulefiles</code> which are used to load specific <code class="language-plaintext highlighter-rouge">modules</code></li>
  <li><code class="language-plaintext highlighter-rouge">/usr/local/share</code>: Where the actual package files are located, i.e. where the packages are installed manually</li>
</ul>

<h4 id="modulefiles-organization">Modulefiles Organization</h4>

<p>Each <code class="language-plaintext highlighter-rouge">modulefile</code> in  <code class="language-plaintext highlighter-rouge">/usr/local/Modules/modulefiles</code> should be organized in the following way:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre>.../modulefiles
├── module1/			# Root folder for a module1
│   ├── .version		# Describes the default version for module1
│   ├── 1.0.4			# Modulefile describing how to load version 1.0.4 of module1
│   ├── 1.0.5			# Modulefile describing how to load version 1.0.5 of module1
│   ├── 2.0.0			# Modulefile describing how to load version 2.0.0 of module1
│   └── ...				# Other versions you'd like to have for module1
├── module2/			# Root folder for a module2
│   ├── .version		# Describes the default version for module2
│   └── ...				# Other versions you'd like to have for module2
└── ...					# Other modules
</pre></td></tr></tbody></table></code></div></div>

<p>The <code class="language-plaintext highlighter-rouge">.version</code> file simply describes the default version thats loaded. As the above example describes, a <code class="language-plaintext highlighter-rouge">module1</code> may have three versions. One can load version <code class="language-plaintext highlighter-rouge">1.0.4</code> with <code class="language-plaintext highlighter-rouge">module load module1/1.0.4</code>. However, if the <code class="language-plaintext highlighter-rouge">.version</code> file says <code class="language-plaintext highlighter-rouge">2.0.0</code> is the default version, <code class="language-plaintext highlighter-rouge">module load module1/2.0.0</code> is equivalent to <code class="language-plaintext highlighter-rouge">module load module1</code>. In this example, the <code class="language-plaintext highlighter-rouge">.version</code> file would look like the following:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>#%Module1.0
set ModulesVersion "2.0.0"
</pre></td></tr></tbody></table></code></div></div>

<p>We want sustainability for our packages, so this structure <em>must</em> be maintained. At some point down the road, there may be a lot of packages, so we should ensure everything’s organized now.</p>

<h4 id="module-source-organization">Module Source Organization</h4>

<p>Similarly to <code class="language-plaintext highlighter-rouge">modulefiles</code>, we must maintain the actual package installation in an organized manner. To do so, we structure the <code class="language-plaintext highlighter-rouge">/usr/local/share</code> as follows:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre>.../share
├── module1/			# Root folder for a module1
│   ├── 1.0.4			# Source for version 1.0.4 for module1
│   ├── 1.0.5			# Source for version 1.0.5 for module1
│   ├── 2.0.0			# Source for version 2.0.0 for module1
│   └── ...				# Other versions you'd like to have for module1
├── module2/			# Root folder for a module2
│   └── ...				# Source for other versions for module2
└── ...					# Other modules
</pre></td></tr></tbody></table></code></div></div>

<h3 id="creating-a-modulefile">Creating a Modulefile</h3>

<p>Please refer to the previous two sections to see how to structure your module: <a href="#modulefiles-organization"><code class="language-plaintext highlighter-rouge">modulefile</code></a> and <a href="#module-source-organization"><code class="language-plaintext highlighter-rouge">module</code> source</a>.</p>

<p>To see a quality modulefile, please see <a href="#simple-example-modulefile">this section</a>.</p>

<p>The purpose of <code class="language-plaintext highlighter-rouge">modulefiles</code>, <a href="http://modules.sourceforge.net/">among others</a>, is to provide dynamic loading/unloading of software packages with conflicting versioning. Essentially, environment variables are changed in <code class="language-plaintext highlighter-rouge">modulefiles</code> so the current shell is aware of specific packages installations. <code class="language-plaintext highlighter-rouge">modulefiles</code> may affect <code class="language-plaintext highlighter-rouge">PATH</code>, <code class="language-plaintext highlighter-rouge">PYTHONPATH</code> or <code class="language-plaintext highlighter-rouge">LD_LIBRARY_PATH</code> because these are variables associated with the current shell session.</p>

<p><code class="language-plaintext highlighter-rouge">modulefiles</code> are written in the Tool Command Language (Tcl). They are made up of processes and directives. For an in depth explanation about Tcl and <code class="language-plaintext highlighter-rouge">modulefile</code> structures, please refer to the <a href="https://modules.readthedocs.io/en/latest/modulefile.html">documentation</a>.</p>

<p>For Wisconsin Autonomous, <em>unless you know what you’re doing</em>, follow these steps to create a <code class="language-plaintext highlighter-rouge">modulefile</code>. <strong><em>Lines starting and ending with <code class="language-plaintext highlighter-rouge">===</code> should not be included in the actual modulefile. They are simply for explanation purposes</em></strong>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="rouge-code"><pre>=== Header ===
=== Gives Module version and simple file description ===
#%Module1.0
#
# MODULE 1.0.0
#

=== ModulesHelp ===
=== Prints when module help &lt;module&gt; is run ===
proc ModulesHelp { } {
        puts stderr "\tSets up environment for MODULE v1.0.0\n"
}

=== module-whatis ===
=== Prints when module whatis &lt;module&gt; is run ===
module-whatis   "sets up environment for MODULE v1.0.0"

=== Local Variable Setup ===
=== Gives package version and source location ===
set             package MODULE
set             version 1.0.0
set             root    /usr/local/share/$package/$version

=== Environment Variable Setup ===
=== Changes environment variables to allow for interacting with the source ===
append-path     PATH    $root/bin
append-path     LD_LIBRARY_PATH $root/lib64
</pre></td></tr></tbody></table></code></div></div>

<h4 id="simple-example-modulefile">Simple Example Modulefile</h4>

<p>For reference, this is an example module for CUDA v11.1.1.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="rouge-code"><pre>#%Module1.0
#
# cuda 11.1.1
#
proc ModulesHelp { } {
        puts stderr "\tSets up environment for CUDA v11.1.1\n"
}

module-whatis   "sets up environment for CUDA v11.1.1"

set             package cuda
set             version 11.1.1
set             root    /usr/local/share/$package/$version

setenv          CUDA_HOME       $root

append-path     PATH    $root/bin
append-path     LD_LIBRARY_PATH $root/lib64
</pre></td></tr></tbody></table></code></div></div>
<h4 id="complicated-example-modulefile">Complicated Example Modulefile</h4>

<p>For reference, this is an example module for Anaconda v4.9.2.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="rouge-code"><pre>#%Module 1.0
#
# anaconda3 modulefile
#
proc ModulesHelp { } {
        puts stderr "\tAdds Anaconda Python 3 to your PATH environment variable\n"
}

module-whatis   "adds Anaconda Python 3 to your PATH environment variable"

set             version 4.9.2
set             root    /usr/local/share/anaconda/$version

append-path            PATH            $root/bin

set             active_shell    [ module-info shell ]
if { "$active_shell" == "bash" } {
        set             activate_conda  "\$(command conda 'shell.bash' 'hook' 2&gt; /dev/null)"
} elseif { "$active_shell" == "zsh" } {
        set             activate_conda  "\$('conda' 'shell.zsh' 'hook' 2&gt; /dev/null)"
}

if { [ module-info mode load ] } {
        puts stdout "eval $activate_conda"
} else {
        puts stdout "conda deactivate"
}

</pre></td></tr></tbody></table></code></div></div>

<h2 id="support">Support</h2>

<p>Contact <a href="mailto:aryoung5@wisc.edu">Aaron Young</a> for any questions or concerns regarding the contents of this repository.</p>

<h2 id="see-also">See Also</h2>

<p>Stay up to date with our technical info by following our <a href="https://www.wisconsinautonomous.org/blog">blog</a>.</p>

<p>Follow us on <a href="https://www.facebook.com/wisconsinautonomous/">Facebook</a>, <a href="https://www.instagram.com/wisconsinautonomous/">Instagram</a>, and <a href="https://www.linkedin.com/company/wisconsin-autonomous/about/">LinkedIn</a>!</p>

<p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/logos/wa-white.png" alt="WA Logo" class="left" height="100" />
<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/logos/uw-crest.png" alt="Wisconsin Crest" class="right" height="100" /></p>


      </div>

      <div class="post-tail-wrapper text-muted">

        <!-- categories -->
        
        <div class="post-meta mb-3">
          <i class="far fa-folder-open fa-fw mr-1"></i>
          
            <a href='/categories/technical/'>Technical</a>,
            <a href='/categories/workstation/'>Workstation</a>
        </div>
        

        <!-- tags -->
        
        <div class="post-tags">
          <i class="fa fa-tags fa-fw mr-1"></i>
          
          <a href="/tags/tutorials/"
            class="post-tag no-text-decoration" >tutorials</a>
          
          <a href="/tags/workstation/"
            class="post-tag no-text-decoration" >workstation</a>
          
          <a href="/tags/technical/"
            class="post-tag no-text-decoration" >technical</a>
          
          </div>
        

        <div class="post-tail-bottom
          d-flex justify-content-between align-items-center mt-3 pt-5 pb-2">
          
          <div class="license-wrapper">
            This post is licensed under
            <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>
            by the author.
          </div>
          

          <!--
 Post sharing snippet

 v2.1
 https://github.com/cotes2020/jekyll-theme-chirpy
 © 2019 Cotes Chung
 Published under the MIT License
-->

<div class="share-wrapper">
  <span class="share-label text-muted mr-1">Share</span>
  <span class="share-icons">
    
    

    
      
        <a href="https://twitter.com/intent/tweet?text=Environment Modules - Wisconsin Autonomous Wiki&url=https://WisconsinAutonomous.github.io/posts/modules/" data-toggle="tooltip" data-placement="top"
          title="Twitter" target="_blank" rel="noopener" aria-label="Twitter">
          <i class="fa-fw fab fa-twitter"></i>
        </a>
    
      
        <a href="https://www.facebook.com/sharer/sharer.php?title=Environment Modules - Wisconsin Autonomous Wiki&u=https://WisconsinAutonomous.github.io/posts/modules/" data-toggle="tooltip" data-placement="top"
          title="Facebook" target="_blank" rel="noopener" aria-label="Facebook">
          <i class="fa-fw fab fa-facebook-square"></i>
        </a>
    
      
        <a href="https://telegram.me/share?text=Environment Modules - Wisconsin Autonomous Wiki&url=https://WisconsinAutonomous.github.io/posts/modules/" data-toggle="tooltip" data-placement="top"
          title="Telegram" target="_blank" rel="noopener" aria-label="Telegram">
          <i class="fa-fw fab fa-telegram"></i>
        </a>
    

    <i class="fa-fw fas fa-link small" onclick="copyLink()"
        data-toggle="tooltip" data-placement="top" title="Copy link"></i>

  </span>
</div>


        </div><!-- .post-tail-bottom -->

      </div><!-- div.post-tail -->

    </div> <!-- .post -->


  </div> <!-- #post-wrapper -->

  

  

  <!--
  The Pannel on right side (Desktop views)
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down">

  <div class="access">

  














  

    <div id="access-lastmod" class="post">
      <span>Recent Update</span>
      <ul class="post-content pl-0 pb-1 ml-1 mt-2">

      
        
        
        
        <li><a href="/posts/work-station-setup/">Work Station Setup</a></li>
      
        
        
        
        <li><a href="/posts/github-org/">Joining the WA Github Org</a></li>
      
        
        
        
        <li><a href="/posts/ms-team/">Joining the WA Microsoft Team</a></li>
      
        
        
        
        <li><a href="/posts/slack-group/">Joining the WA Slack Group</a></li>
      
        
        
        
        <li><a href="/posts/work-station-info/">Work Station Info</a></li>
      

      </ul>
    </div> <!-- #access-lastmod -->

  

  















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



  
    <div id="access-tags">
      <span>Trending Tags</span>
      <div class="d-flex flex-wrap mt-3 mb-1 mr-3">

      
        
        <a class="post-tag" href="/tags/tutorials/">tutorials</a>
      
        
        <a class="post-tag" href="/tags/technical/">technical</a>
      
        
        <a class="post-tag" href="/tags/non-technical/">non-technical</a>
      
        
        <a class="post-tag" href="/tags/workstation/">workstation</a>
      
        
        <a class="post-tag" href="/tags/setup/">setup</a>
      
        
        <a class="post-tag" href="/tags/work-station/">work station</a>
      
        
        <a class="post-tag" href="/tags/templates/">templates</a>
      

      </div>
    </div>
  
  </div> <!-- .access -->

  
    <div id="toc-wrapper" class="pl-0 pr-4 mb-5">
      <span class="pl-3 pt-2 mb-2">Contents</span>
      <nav id="toc" data-toggle="toc"></nav>
    </div>
  

</div> <!-- #panel-wrapper -->


</div> <!-- .row -->

<div class="row">
  <div class="col-12 col-lg-11 col-xl-8">
    <div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4">

    <!--
 Recommend the other 3 posts according to the tags and categories of the current post,
 if the number is not enough, use the other latest posts to supplement.

 v2.0
 https://github.com/cotes2020/jekyll-theme-chirpy
 © 2019 Cotes Chung
 Published under the MIT License
-->

<!-- The total size of related posts  -->


<!-- An random integer that bigger than 0  -->


<!-- Equals to TAG_SCORE / {max_categories_hierarchy}  -->








  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  
    
  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  


  

  

  

  

  

  








<!-- Fill with the other newlest posts  -->






  <div id="related-posts" class="mt-5 mb-2 mb-sm-4">
    <h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3>
    <div class="card-deck mb-4">
    
      
      
      <div class="card">
        <a href="/posts/work-station-info/">
          <div class="card-body">
            <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago small"
  >

  
  

  
    Jan 16
  

  <i class="unloaded">2021-01-16T14:09:00-06:00</i>

</span>
            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>Work Station Info</h3>
            <div class="text-muted small">
              <p>
                





                As of early January, 2021, Wisconsin Autonomous has a high performance, shared computer for developing and testing software. The goal of the workstation is for us to be able to run simulations, tra...
              </p>
            </div>
          </div>
        </a>
      </div>
    
      
      
      <div class="card">
        <a href="/posts/work-station-setup/">
          <div class="card-body">
            <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago small"
  >

  
  

  
    Jan 28
  

  <i class="unloaded">2021-01-28T14:09:00-06:00</i>

</span>
            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>Work Station Setup</h3>
            <div class="text-muted small">
              <p>
                





                Please see this post for more background information on the workstation.

Use Guidelines

The computer was built so that many people could use it at the same time. When using the work station, plea...
              </p>
            </div>
          </div>
        </a>
      </div>
    
      
      
      <div class="card">
        <a href="/posts/anaconda/">
          <div class="card-body">
            <!--
  Date format snippet

  v2.4.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->
<span class="timeago small"
  >

  
  

  
    Jan 29
  

  <i class="unloaded">2021-01-29T14:10:00-06:00</i>

</span>
            <h3 class="pt-0 mt-1 mb-3" data-toc-skip>Anaconda</h3>
            <div class="text-muted small">
              <p>
                





                Anaconda is a super powerful tool for scientific computing and provides a simple package management and deployment system. Although this post is primarily for use on the work station, Anaconda is a...
              </p>
            </div>
          </div>
        </a>
      </div>
    
    </div> <!-- .card-deck -->
  </div> <!-- #related-posts -->



    <!--
  Navigation buttons at the bottom of the post.

  v2.1
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2020 Cotes Chung
  MIT License
-->

<div class="post-navigation d-flex justify-content-between">
  
  <a href="/posts/work-station-info/" class="btn btn-outline-primary">
    <p>Work Station Info</p>
  </a>
  

  
  <a href="/posts/shells/" class="btn btn-outline-primary">
    <p>The Unix Shell</p>
  </a>
  

</div>

    

    </div> <!-- #post-extend-wrapper -->

  </div> <!-- .col-* -->

</div> <!-- .row -->



  <!-- image lazy load: https://github.com/ApoorvSaxena/lozad.js -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script>

<script type="text/javascript">
  const imgs = document.querySelectorAll('.post-content img');
  const observer = lozad(imgs);
  observer.observe();
</script>



        
        <!--
  The Footer
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->

<footer class="d-flex w-100 justify-content-center">
  <div class="d-flex justify-content-between align-items-center">
    <div class="footer-left">
      <p class="mb-0">
        © 2021
        <a href="https://github.com/WisconsinAutonomous">Wisconsin Autonomous</a>.
        
        <span data-toggle="tooltip" data-placement="top"
          title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span>
        
      </p>
    </div>

    <div class="footer-right">
      <p class="mb-0">
        Powered by
        <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>
        with
        <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a>
        theme.
      </p>
    </div>

  </div> <!-- div.d-flex -->
</footer>


      </div>

      <!--
  The Search results
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->
<div id="search-result-wrapper" class="d-flex justify-content-center unloaded">
  <div class="col-12 col-xl-11 post-content">
    <div id="search-hints">
      <h4 class="text-muted mb-4">Trending Tags</h4>

      















  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        

  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
  
    
    
    
    
      
        
        



      
        
        <a class="post-tag" href="/tags/tutorials/">tutorials</a>
      
        
        <a class="post-tag" href="/tags/technical/">technical</a>
      
        
        <a class="post-tag" href="/tags/non-technical/">non technical</a>
      
        
        <a class="post-tag" href="/tags/workstation/">workstation</a>
      
        
        <a class="post-tag" href="/tags/setup/">setup</a>
      
        
        <a class="post-tag" href="/tags/work-station/">work station</a>
      
        
        <a class="post-tag" href="/tags/templates/">templates</a>
      

    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>


    </div> <!-- #main-wrapper -->

    

    <div id="mask"></div>

    <a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button">
      <i class="fas fa-angle-up"></i>
    </a>

    <!--
  Jekyll Simple Search loader
  v2.0
  https://github.com/cotes2020/jekyll-theme-chirpy
  © 2017-2019 Cotes Chung
  MIT License
-->





<script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script>

<script>
SimpleJekyllSearch({
  searchInput: document.getElementById('search-input'),
  resultsContainer: document.getElementById('search-results'),
  json: '/assets/js/data/search.json',
  searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0">  <a href="https://WisconsinAutonomous.github.io{url}">{title}</a>  <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">    <div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div>    <div><i class="fa fa-tag fa-fw"></i>{tags}</div>  </div>  <p>{snippet}</p></div>',
  noResultsText: '<p class="mt-5">Oops! No result founds.</p>'
});
</script>

  </body>

</html>

