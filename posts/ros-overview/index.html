<!DOCTYPE html><html lang="en" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.7.2"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="ROS Overview" /><meta name="author" content="Aaron Young" /><meta property="og:locale" content="en_US" /><meta name="description" content="This guide outlines how Wisconsin Autonomous structures their ROS respositories and how ROS development should take place" /><meta property="og:description" content="This guide outlines how Wisconsin Autonomous structures their ROS respositories and how ROS development should take place" /><link rel="canonical" href="https://wisconsinautonomous.github.io/posts/ros-overview/" /><meta property="og:url" content="https://wisconsinautonomous.github.io/posts/ros-overview/" /><meta property="og:site_name" content="Wisconsin Autonomous Wiki" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-12-16T16:53:00-06:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="ROS Overview" /><meta name="twitter:site" content="@wisconsinsae" /><meta name="twitter:creator" content="@Aaron Young" /><meta name="google-site-verification" content="google-site-verification=YfDmeOPIcTbrGeSI41_jHhUfinOLP4na9_TSFbc-Jeo" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Aaron Young"},"dateModified":"2022-03-15T16:10:19-05:00","datePublished":"2021-12-16T16:53:00-06:00","description":"This guide outlines how Wisconsin Autonomous structures their ROS respositories and how ROS development should take place","headline":"ROS Overview","mainEntityOfPage":{"@type":"WebPage","@id":"https://wisconsinautonomous.github.io/posts/ros-overview/"},"url":"https://wisconsinautonomous.github.io/posts/ros-overview/"}</script><title>ROS Overview | Wisconsin Autonomous Wiki</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" href="/assets/css/post.css" as="style"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://github.com/WisconsinAutonomous/wa-resources/blob/master/Images/wa-square-dark.png?raw=true" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Wisconsin Autonomous Wiki</a></div><div class="site-subtitle font-italic">A student organizaton at UW Madison</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tabs/documentation/" class="nav-link"> <i class="fa-fw fas fa-book ml-xl-3 mr-xl-3 unloaded"></i> <span>DOCUMENTATION</span> </a><li class="nav-item"> <a href="/tabs/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tabs/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/tabs/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tabs/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/WisconsinAutonomous" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://instagram.com/wisconsinautonomous" aria-label="instagram" target="_blank" rel="noopener"> <i class="fab fa-instagram"></i> </a> <a href="https://facebook.com/wiconsinautonomous" aria-label="facebook" target="_blank" rel="noopener"> <i class="fab fa-facebook"></i> </a> <a href="https://linkedin.com/company/wisconsinsae" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['wisconsinautonomous','studentorgs.wisc.edu'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>ROS Overview</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>ROS Overview</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Thu, Dec 16, 2021, 4:53 PM -0600" > Dec 16, 2021 <i class="unloaded">2021-12-16T16:53:00-06:00</i> </span> by <span class="author"> Aaron Young </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Tue, Mar 15, 2022, 4:10 PM -0500" > Mar 15 <i class="unloaded">2022-03-15T16:10:19-05:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2273 words">12 min</span></div></div><div class="post-content"><p>This guide outlines how Wisconsin Autonomous structures their ROS respositories and how ROS development should take place</p><h2 id="purpose">Purpose</h2><p>A major difference between Wisconsin Autonomous and industry is that in WA we have much higher turnover. This is because students graduate or move on. In addition, industry has employees working 40hrs a week and WA has students working 5-10hrs a week. As a result, planning is very important to ensure the time we do spend working on WA is not wasted.</p><p>This guide goes into detail about how Wisconsin Autonomous structures their control stacks. We may have multiple control stacks for different applications; for example, one for the evGrand Prix, one for AutoDrive, and one for the rc car.</p><p>It is very important the ideas presented on this page are followed <em>to a T</em>.</p><h2 id="prerequisites">Prerequisites</h2><p>We’ll refer to the control stack repository as <code class="language-plaintext highlighter-rouge">REPO</code> from now on. This simply helps for describing what’s going on, replace <code class="language-plaintext highlighter-rouge">REPO</code> with the repository you’re using, i.e. <code class="language-plaintext highlighter-rouge">waGrandPrix</code>.</p><h2 id="tldr">TL;DR</h2><p><strong>This section is for quick reference!! If you have not read this document in-full yet, you <em>must</em> do that first.</strong></p><h3 id="required-packages">Required Packages</h3><ul><li><a href="https://www.docker.com/">Docker</a><li><a href="https://docs.docker.com/compose/">Docker Compose</a><li><a href="https://www.python.org/">Python3</a><li><a href="https://git-scm.com/">Git</a></ul><h3 id="1-clone-the-repository">1. Clone the Repository</h3><p><em>Needed only once.</em></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git clone <span class="nt">--recursive</span> https://github.com/WisconsinAutonomous/REPO.git <span class="o">&amp;&amp;</span> <span class="nb">cd </span>REPO 
</pre></table></code></div></div><h3 id="2-install-host-python-dependencies">2. Install Host Python Dependencies</h3><p><em>Needed only once.</em></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>pip <span class="nb">install</span> <span class="nt">-r</span> requirements.txt
</pre></table></code></div></div><div class="alert alert-info" role="alert"> <i class="fa fa-sm fa-info-circle"></i><b>  Note:</b> <br /> We recommend using a python environment (Anaconda, venv, etc.).</div><h3 id="3-use-the-docker-development-environment">3. Use the Docker Development Environment</h3><p><strong>Building, Starting, and Entering:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>atk dev
</pre></table></code></div></div><p><strong>Tearing Down:</strong></p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>atk dev <span class="nt">--down</span>
</pre></table></code></div></div><h3 id="4-test-the-stack-with-wa_simulator">4. Test the Stack with wa_simulator</h3><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>atk dev <span class="nt">-r</span> <span class="nt">-s</span> wasim <span class="nt">--args</span> python baseline_track.py <span class="nt">-mv</span>
</pre></table></code></div></div><div class="alert alert-info" role="alert"> <i class="fa fa-sm fa-info-circle"></i><b>  Note:</b> <br /> This is an example, <code class="language-plaintext highlighter-rouge">baseline_track.py</code> may not exist in <code class="language-plaintext highlighter-rouge">REPO</code>.</div><h3 id="5-visualize-gui-applications">5. Visualize GUI Applications</h3><p>Navigate to <a href="https://localhost:8080/">https://localhost:8080/</a>.</p><h2 id="ros">ROS</h2><p>The <a href="https://www.ros.org/">Robot Operating System (ROS)</a> is a major tool in the area of robotics. We use <a href="https://docs.ros.org/en/galactic/">ROS 2</a> and for the remainder of this document, it is assumed you have a solid background with ROS related topics. This includes, but is not limited to, topics, nodes, messages, publishers, and subscribers. If any of this doesn’t make sense, please refer to the <a href="https://docs.ros.org/en/galactic/Tutorials.html">ROS tutorials</a>.</p><p>We have also created an easy to setup ROS environment for learning ROS using <a href="#docker">Docker</a> called <a href="https://github.com/WisconsinAutonomous/wa_ros_tutorial">wa_ros_tutorial</a>. There are instructions there on how to set it up.</p><h2 id="docker">Docker</h2><p>Additionally, <a href="https://www.docker.com/">Docker</a> is used to mitigate setup headaches. Docker related background is out of the scope of this article, so please research it yourself to get a better understanding of what Docker really is. You <em>can</em>, in theory, get through this entire tutorial without understanding what Docker is, but that doesn’t help you learn things, right?</p><h2 id="repository-structure">Repository Structure</h2><p>Each control stack used by Wisconsin Autonomous should be structured as follows:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>REPO
├── .atk.yml 
├── docker/             # Dockerfiles
├── docs/               # Documentation/tutorials specific to this repo
├── misc/               # Miscellaneous scripts and resources
├── wasim/              # wa_simulator scenarios that can be used to test the control stack
├── workspace/          # ROS 2 workspace
└── README.md
</pre></table></code></div></div><p>A template has been made with the aforementioned structure to streamline the creation process for this type of repo. The template can be found <a href="https://github.com/WisconsinAutonomous/wa-control-stack">here</a>.</p><h3 id="atkyml"><code class="language-plaintext highlighter-rouge">.atk.yml</code></h3><p><a href="https://docs.docker.com/compose/">Docker Compose</a> is a tool for running multi-container Docker applications. For the most part, it is used in this way; however, it comes with an entrypoint called <code class="language-plaintext highlighter-rouge">docker compose</code> that simplifies building/running/executing on containers and it is cross platform (i.e. it replaces bash scripts with intricate command line arguments).</p><p>The <code class="language-plaintext highlighter-rouge">.atk.yml</code> file defines custom configuration variables for the <code class="language-plaintext highlighter-rouge">docker</code> containers within it. All <code class="language-plaintext highlighter-rouge">docker-compose.yml</code> files, which the <code class="language-plaintext highlighter-rouge">.atk.yml</code> file provides custom edits for, will have atleast two <code class="language-plaintext highlighter-rouge">services</code>: <code class="language-plaintext highlighter-rouge">dev</code> and <code class="language-plaintext highlighter-rouge">vnc</code>. <code class="language-plaintext highlighter-rouge">dev</code> is meant specifically for local development of the ROS stack. <code class="language-plaintext highlighter-rouge">vnc</code> is used for visualization purposes. On the actual vehicle, we’ll use a more refined docker container or run it outside of docker entirely.</p><h3 id="docker-1"><code class="language-plaintext highlighter-rouge">docker/</code></h3><p>This folder holds the Dockerfiles that are used to generate the images that we’ll run the control stack in. For the most part, these don’t need to be changed.</p><h3 id="docs"><code class="language-plaintext highlighter-rouge">docs/</code></h3><p>This folder holds general documentation or tutorials specific to this repository. Anything that may be similar across each repos should just go in this guide.</p><h3 id="misc"><code class="language-plaintext highlighter-rouge">misc/</code></h3><p>This should house miscellaneous resources and/or scripts. This should again be specific to the repository. Anything common across repos should go in a shared repository.</p><h3 id="sim"><code class="language-plaintext highlighter-rouge">sim/</code></h3><p>This folder contains scripts for interacting with simulators. For example, <code class="language-plaintext highlighter-rouge">wa_simulator</code> scripts should be placed here. This folder, in conjunction with the <code class="language-plaintext highlighter-rouge">atk</code>, is simply a way of providing simulation files without the need to create them each time or build the simulators locally.</p><h3 id="workspace"><code class="language-plaintext highlighter-rouge">workspace/</code></h3><p>This is where we put the ROS 2 workspace. This is what is specific to each repository. Most of the development will take place here, and we’ll go into more detail in future sections of this guide.</p><h2 id="setup-and-installation">Setup and Installation</h2><p><strong>DISCLAIMER</strong>: For developing the ROS 2 workspace, you <em>must</em> use the created docker images. This is a requirement because we don’t want to have to support multiple operating systems and have to deal with individual people’s systems. The only place docker may not be used with this repository is on the actual vehicle (and with our own hardware).</p><p>Docker is a powerful application that is out of the scope of this guide. Beyond Wisconsin Autonomous, knowing what and how to use Docker is a very valuable skill. To learn more, visit <a href="https://www.docker.com/">their website</a>. You can also find a huge amount of tutorials and resources just through Google. Please spend some time understanding Docker before continuing. For the remainder of this tutorial, it is assumed you understand <code class="language-plaintext highlighter-rouge">docker</code> and <code class="language-plaintext highlighter-rouge">docker compose</code> at least on the surface.</p><p>For all of the commands we’ll mention, they must be run from within the target repository (i.e. <code class="language-plaintext highlighter-rouge">cd</code> into the <code class="language-plaintext highlighter-rouge">REPO</code> folder).</p><h3 id="clone-the-repository">Clone the Repository</h3><p>An example command to clone the <code class="language-plaintext highlighter-rouge">REPO</code> repository locally is provided below:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>git clone <span class="nt">--recursive</span> https://github.com/WisconsinAutonomous/REPO.git <span class="o">&amp;&amp;</span> <span class="nb">cd </span>REPO 
</pre></table></code></div></div><div class="alert alert-info" role="alert"> <i class="fa fa-sm fa-info-circle"></i><b>  Note:</b> <br /> <code class="language-plaintext highlighter-rouge">--recursive</code> is recommended so that all <a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">git submodules</a> are automatically pulled along with the main repository. If this isn’t done during this step, you may do this after the fact with <code class="language-plaintext highlighter-rouge">git submodule update --init</code>.</div><h3 id="installing-required-packages">Installing Required Packages</h3><p>First, you need to install any necessary python packages for <code class="language-plaintext highlighter-rouge">REPO</code>. There should be a file called <code class="language-plaintext highlighter-rouge">requirements.txt</code> at the root of <code class="language-plaintext highlighter-rouge">REPO</code>, which contains any python packages needed to run the control stack. At the very least, this file will contain <code class="language-plaintext highlighter-rouge">autonomy-toolkit</code>, which is the command line interface tool created for the Wisconsin Autonomous team.</p><p>To install these packages, run the following command:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>pip <span class="nb">install</span> <span class="nt">-r</span> requirements.txt
</pre></table></code></div></div><div class="alert alert-info" role="alert"> <i class="fa fa-sm fa-info-circle"></i><b>  Note:</b> <br /> It is recommended to use a python environment of some sort (i.e. Anaconda or venv). Activate the environment prior to running the previous command.</div><h3 id="installing-docker">Installing Docker</h3><p>To get started, you will need to install <a href="https://docs.docker.com/desktop/">Docker</a> and <a href="https://docs.docker.com/compose/install/">Docker Compose</a>. Please refer to the previous links for instructions on how to install.</p><h3 id="developing-in-the-control-stack">Developing in the Control Stack</h3><p>For development, we’ll focus on the <code class="language-plaintext highlighter-rouge">dev</code> service.</p><p>The very first time you start up the control stack, it will need to build the image that the container uses. This may take a while, but should only need to be done the first time around.</p><p>It is <em>required</em> that you use the <code class="language-plaintext highlighter-rouge">autonomy-toolkit</code> to start, exec, build, and tear down the containers. Using the <code class="language-plaintext highlighter-rouge">autonomy-toolkit</code>, you can start, build, and attach to the container with on command.</p><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>atk dev
</pre></table></code></div></div><p>Within the container, you should enter the shell in the <code class="language-plaintext highlighter-rouge">~/{project}/workspace</code> directory, where <code class="language-plaintext highlighter-rouge">{project}</code> is custom to <code class="language-plaintext highlighter-rouge">REPO</code> and is probably just a lowercase version of the stacks name. <code class="language-plaintext highlighter-rouge">~/{project}/</code> is a docker <a href="https://docs.docker.com/storage/volumes/">volume</a>, so any changes you make in this folder will be reflected on your system. I will say that again: the only file changes that will persist between your host system and the docker container are the files in <code class="language-plaintext highlighter-rouge">/{project}</code>. If you make any changes from within your docker container, ensure it is done in there.</p><p>For development purposes, you can use whatever tools you’d like for editing the code (<code class="language-plaintext highlighter-rouge">Atom</code>, <code class="language-plaintext highlighter-rouge">VSCode</code>, etc.). Because <code class="language-plaintext highlighter-rouge">~/{project}</code> in the container is a volume (see previous paragraph), changes from your system will also be copied to your container.</p><p>Various tools are or can be installed to aid development, such as <code class="language-plaintext highlighter-rouge">tmux</code>. Feel free to leverage these. The <code class="language-plaintext highlighter-rouge">atk dev...</code> command can also be run from any terminal window to attach to a new shell session (as long as it’s run from within this repository); this is the advantage of running the container in the background (detached).</p><p>For those interested, you may use other shells. <code class="language-plaintext highlighter-rouge">zsh</code> and <code class="language-plaintext highlighter-rouge">bash</code> should both already be installed, but you may need to install other shells, if desired.</p><h3 id="stopping-the-container">Stopping the Container</h3><p>When you are finished and would like to free up resources on your computer, you may shutdown the container with either of the following commands.</p><div class="language-shell highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>atk dev <span class="nt">--down</span>
</pre></table></code></div></div><h3 id="building-the-ros-workspace">Building the ROS Workspace</h3><p>By default, the ROS distribution should be sourced automatically thanks to the shell configuration file. This will only be the case if you have built the workspace with <code class="language-plaintext highlighter-rouge">colcon</code> and there is an <code class="language-plaintext highlighter-rouge">setup.&lt;shell&gt;</code> file present at <code class="language-plaintext highlighter-rouge">~/{project}/workspace/install/</code>.</p><p>As a reminder, the ROS workspace is located in <code class="language-plaintext highlighter-rouge">~/{project}/workspace/</code>. To get started with ROS in the container, you will need to build the workspace. An example of how to do this is provided below, but how to use ROS beyond this example is outside the scope of this guide. NOTE: <code class="language-plaintext highlighter-rouge">colcon build</code> should only ever be run at <code class="language-plaintext highlighter-rouge">~/{project}/workspace/</code>.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>colcon build
</pre></table></code></div></div><h2 id="ros-workspace">ROS Workspace</h2><p>The structure of the ROS workspace within <code class="language-plaintext highlighter-rouge">REPO</code> may be slightly different given the application, but it should generally look like the following.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre>└── src
    ├── common/
    │   └── common_interfaces/
    ├── perception/
    │   ├── perception_py/
    │   └── perception_cpp/
    ├── state_estimation/
    ├── controls/
    ├── drivers/
    └── external
</pre></table></code></div></div><h3 id="creating-a-package">Creating a Package</h3><p>Packages can be created using the <code class="language-plaintext highlighter-rouge">ros2 pkg create</code> command. Use <code class="language-plaintext highlighter-rouge">ros2 pkg create --help</code> to get more information.</p><p>For example, to create a new python package, run the following: <code class="language-plaintext highlighter-rouge">ros2 pkg create --build-type ament_python new_package</code> from the <code class="language-plaintext highlighter-rouge">~/{project}/workspace/src</code> directory. This will create a new package at the directory level.</p><h3 id="visualizing-ros-topics">Visualizing ROS Topics</h3><p>Each control stack should also have a <a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">submodule</a> for <a href="https://github.com/wisconsinautonomous/rosboard">ROSboard</a>. ROSboard allows easy visualization of ROS topics without the need for many external packages. It can also be easily including the ROS framework, meaning it can be incorporated in launch files and other ROS specific tools. To learn more, please reference the <a href="https://github.com/wisconsinautonomous/rosboard">README</a>.</p><p>The Docker container for <code class="language-plaintext highlighter-rouge">REPO</code> should already be setup with ROSboard and should work out of the box. If you’d like to use ROSboard as a standalone node (outside of launch files), run the following command.</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>ros2 run rosboard rosboard_node
</pre></table></code></div></div><p>This will run the rosboard server and start a server on port <code class="language-plaintext highlighter-rouge">8888</code>. This means that the webpage from rosboard is served to the url <code class="language-plaintext highlighter-rouge">http://localhost:8888</code>. Navigate there in a browser and you should see ROSboard!</p><p>To visualize messages, click the hamburger menu at the top left. There, you can select what messages you’d like to visualize. The ROSboard repository was forked into the Wisconsin Autonomous team, so if there are custom visualizations that would like to be viewed with custom message types, this can be implemented there. Refer to the ROSboard documentation for information on how to do this.</p><h3 id="visualizing-other-gui-apps">Visualizing Other GUI Apps</h3><p>In addition to <code class="language-plaintext highlighter-rouge">rosboard</code>, you may also want to use <code class="language-plaintext highlighter-rouge">vnc</code> as a tool for visualizing gui apps. <a href="https://novnc.com/info.html">novnc</a> is a tool for running <a href="https://en.wikipedia.org/wiki/Virtual_Network_Computing">VNC</a> in a browser. With the correct setup, this allows you to run gui tools in a docker container and visualize them in your browser. Typically, running gui apps is very difficult in docker containers, but it is made simple with <code class="language-plaintext highlighter-rouge">novnc</code>. Furthermore, <code class="language-plaintext highlighter-rouge">vnc</code> can also be used using vnc viewers.</p><p>The <a href="http://projects.sbel.org/autonomy-toolkit"><code class="language-plaintext highlighter-rouge">autonomy-toolkit</code></a> provides a very convenient <code class="language-plaintext highlighter-rouge">vnc</code> container that can be explicitly invoked with <code class="language-plaintext highlighter-rouge">atk dev -s vnc -u</code> to spin up a <code class="language-plaintext highlighter-rouge">vnc</code> container that can run on the same Docker <code class="language-plaintext highlighter-rouge">network</code> as the ros stack. Then, if the container has set it’s <code class="language-plaintext highlighter-rouge">DISPLAY</code> environment variable to <code class="language-plaintext highlighter-rouge">vnc:0.0</code> (provided the <code class="language-plaintext highlighter-rouge">vnc</code> docker container has been named ‘vnc’), any gui apps that are displayed can be seen in the browser at <a href="http://localhost:8080/">http://localhost:8080/</a> (also assuming the 8080 port has been exposed by the container).</p><div class="alert alert-info" role="alert"> <i class="fa fa-sm fa-info-circle"></i><b>  Note:</b> <br /> By default, the <code class="language-plaintext highlighter-rouge">atk dev</code> command will run spin up the <code class="language-plaintext highlighter-rouge">vnc</code> container implicitly. You probably don’t need to explicitly start up the <code class="language-plaintext highlighter-rouge">vnc</code> container yourself.</div><h2 id="using-simulations">Using Simulations</h2><p>Simulations are powerful in order to quickly set up scenarios with your ROS stack. <code class="language-plaintext highlighter-rouge">wa_simulator</code> has been made just for this, along with it’s ros bridge <code class="language-plaintext highlighter-rouge">wa_simulator_ros_bridge</code>. The documentation for the simulator can be found <a href="https://WisconsinAutonomous.github.io/wa_simulator">here</a>.</p><p>Because we are using Docker as the main tool for running ROS, the easiest way to have simulators interface with our software stack is also through Docker. This can be done via Docker networks, which were discussed earlier.</p><p>A more in-depth tutorial was created in the <code class="language-plaintext highlighter-rouge">wa_simulator</code> docs and that can be found <a href="https://wisconsinautonomous.github.io/wa_simulator/tutorials/docker-usage.html">here</a>.</p><h3 id="running-wa_simulator-scripts">Running <code class="language-plaintext highlighter-rouge">wa_simulator</code> Scripts</h3><p>To run <code class="language-plaintext highlighter-rouge">wa_simulator</code> scripts with your ROS software stack in docker, the <code class="language-plaintext highlighter-rouge">REPO</code> should provide a <code class="language-plaintext highlighter-rouge">wasim</code> service that can be invoked with <code class="language-plaintext highlighter-rouge">atk</code>.</p><p>As the documentation describes, to run a basic simulation script in the <code class="language-plaintext highlighter-rouge">sim/wasim</code> subfolder, you can run something similar to the following command:</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>atk dev <span class="nt">-r</span> <span class="nt">-s</span> wasim wa_simulator_script.py <span class="nt">-mv</span>
</pre></table></code></div></div><h2 id="other-tools">Other Tools</h2><div class="alert alert-info" role="alert"> <i class="fa fa-sm fa-info-circle"></i><b>  Note:</b> <br /> To update…</div><h2 id="support">Support</h2><p>Contact <a href="mailto:wisconsinautonomous@studentorg.wisc.edu">Wisconsin Autonomous</a> for any questions or concerns regarding the contents of this post.</p><h2 id="see-also">See Also</h2><p>Stay up to date with our technical info by following our <a href="https://wa.wisc.edu/blog">blog</a>.</p><p>Follow us on <a href="https://www.facebook.com/wisconsinautonomous/">Facebook</a>, <a href="https://www.instagram.com/wisconsinautonomous/">Instagram</a>, and <a href="https://www.linkedin.com/company/wisconsin-autonomous/about/">LinkedIn</a>!</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/logos/wa-white.png" alt="WA Logo" class="left" height="100" /> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="/assets/img/logos/uw-crest.png" alt="Wisconsin Crest" class="right" height="100" /></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/ros/'>ROS</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/ros/" class="post-tag no-text-decoration" >ros</a> <a href="/tags/technical/" class="post-tag no-text-decoration" >technical</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=ROS Overview - Wisconsin Autonomous Wiki&url=https://WisconsinAutonomous.github.io/posts/ros-overview/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=ROS Overview - Wisconsin Autonomous Wiki&u=https://WisconsinAutonomous.github.io/posts/ros-overview/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=ROS Overview - Wisconsin Autonomous Wiki&url=https://WisconsinAutonomous.github.io/posts/ros-overview/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/flashing-the-jetson-agx-xavier/">Flashing the Jetson AGX Xavier</a><li><a href="/posts/ros-overview/">ROS Overview</a><li><a href="/posts/writing-a-new-post/">Writing a New Post</a><li><a href="/posts/new-member/">New Member Guide</a><li><a href="/posts/vnc/">VNC</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/tutorials/">tutorials</a> <a class="post-tag" href="/tags/non-technical/">non-technical</a> <a class="post-tag" href="/tags/technical/">technical</a> <a class="post-tag" href="/tags/workstation/">workstation</a> <a class="post-tag" href="/tags/setup/">setup</a> <a class="post-tag" href="/tags/templates/">templates</a> <a class="post-tag" href="/tags/work-station/">work station</a> <a class="post-tag" href="/tags/calendar/">calendar</a> <a class="post-tag" href="/tags/ros/">ros</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/vnc/"><div class="card-body"> <span class="timeago small" > Jan 29, 2021 <i class="unloaded">2021-01-29T14:11:00-06:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>VNC</h3><div class="text-muted small"><p> Virtual Network Computing (VNC) is a powerful application that allows you to use graphical windows of a browser without being physically with the computer. By default, the work station is hidden be...</p></div></div></a></div><div class="card"> <a href="/posts/package-managers/"><div class="card-body"> <span class="timeago small" > Jan 10, 2021 <i class="unloaded">2021-01-10T18:34:00-06:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Package Managers</h3><div class="text-muted small"><p> A package manager is a software tool that automates installing, upgrading, configuring and removing computer programs consistently and reliably. In most applications, package managers are non-graph...</p></div></div></a></div><div class="card"> <a href="/posts/jupyter-hub/"><div class="card-body"> <span class="timeago small" > Jan 10, 2021 <i class="unloaded">2021-01-10T18:34:00-06:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>JupyterHub</h3><div class="text-muted small"><p> JupyterHub is a powerful program that allows companies, classrooms or research labs to share computational hardware and run notebook based code concurrently. Jupyter’s goal is to provide interactiv...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/new-member/" class="btn btn-outline-primary"><p>New Member Guide</p></a> <a href="/posts/fleet-vehicle/" class="btn btn-outline-primary"><p>Reserving a Fleet Vehicle</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/WisconsinAutonomous">Wisconsin Autonomous</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/tutorials/">tutorials</a> <a class="post-tag" href="/tags/non-technical/">non technical</a> <a class="post-tag" href="/tags/technical/">technical</a> <a class="post-tag" href="/tags/workstation/">workstation</a> <a class="post-tag" href="/tags/setup/">setup</a> <a class="post-tag" href="/tags/templates/">templates</a> <a class="post-tag" href="/tags/work-station/">work station</a> <a class="post-tag" href="/tags/calendar/">calendar</a> <a class="post-tag" href="/tags/ros/">ros</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://WisconsinAutonomous.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
